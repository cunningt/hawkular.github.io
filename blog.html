<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Hawkular</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- css -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/tabzilla.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
    <link href="css/ekko-lightbox.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
    <script src="js/moment.min.js"></script>
    <script src="js/jquery-1.11.2.min.js"></script>

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="alternate" href="feed.xml" title="Hawkular Blog - RSS" type="application/rss+xml">

  </head>
  <body onload="prettyPrint()" data-spy="scroll" data-offset="80" data-target="#toc">
    <div id="wrap">
      <div class="dropup">
        <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
        <script>
            window.addEventListener('load', function() {
                 renderTabzilla("Hawkular", "https://hawkular.github.io", true );
            }, false);
        </script>
      </div>

    	<!-- Fixed navbar -->
        <nav class="navbar navbar-fixed-top" role="navigation">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button class="navbar-toggle collapsed" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="">Home</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li><a href="overview/">Overview</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular Services<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li class="menu-item dropdown dropdown-submenu">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item ">
                          <a href="hawkular-services/docs/quickstart-guide/">Quickstart</a>
                        </li>
                        <li class="menu-item ">
                          <a href="hawkular-services/docs/installation-guide/">Installation Guide</a>
                        </li>
                        <li class="menu-item ">
                          <a href="hawkular-services/docs/user-guide/">User Guide</a>
                        </li>
                        <li class="menu-item dropdown dropdown-submenu">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">REST API</a>
                          <ul class="dropdown-menu">
                            <li class="menu-item ">
                              <a href="docs/rest/rest-alerts.html">Alerting</a>
                            </li>
                            <li class="menu-item ">
                              <a href="docs/rest/rest-inventory.html">Inventory</a>
                            </li>
                            <li class="menu-item ">
                              <a href="docs/rest/rest-metrics.html">Metrics</a>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-services/releases">Download</a>
                    </li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular APM<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li>
                      <li><a href="hawkular-apm/">Overview</a></li>
                    </li>
                    <li>
                      <a href="https://hawkular.gitbooks.io/hawkular-apm-user-guide/content/">Documentation</a>
                    </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-apm/releases/">Download</a>
                    </li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular Metrics<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item ">
                          <a href="hawkular-metrics/docs/user-guide/">User Guide</a>
                        </li>
                        <li class="menu-item ">
                          <a href="docs/rest/rest-metrics.html">Metrics REST API</a>
                        </li>
                        <li class="menu-item ">
                          <a href="docs/rest/rest-alerts.html">Alerting REST API</a>
                        </li>
                      </ul>
                  </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-metrics/releases/">Download</a>
                    </li>
                  </ul>
                </li>
                <li><a href="hawkular-clients/">Hawkular Clients</a></li>
                <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                  Community
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="community/docs/getting-involved/">Getting Involved</a>
                  </li>
                  <li class="menu-item ">
                    <a href="community/docs/developer-guide/">Developer Guide</a>
                  </li>
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Labs</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item ">
                          <a href="community/labs/datamining/">Datamining</a>
                        </li>
                        <li class="menu-item ">
                          <a href="https://github.com/pilhuhn/hawkfx">HawkFX</a>
                        </li>
                        <li class="menu-item ">
                          <a href="hawkular-clients/android-client/">Android client</a>
                        </li>
                        <li class="menu-item ">
                          <a href="https://github.com/jotak/hawkular-java-toolbox">Client-side java toolbox</a>
                        </li>
                      </ul>
                  </li>
                  <li>
                    <a href="https://github.com/hawkular">GitHub Repositories</a>
                  <li>
                    <a href="https://travis-ci.org/hawkular">CI Builds</a>
                  </li>
                </ul></li>
              </ul>
            </div>
          </div>
        </nav>


<section class="main-banner blog-mainbanner">
    <div class="container">
        <h1>Hawkular Blog</h1>
    </div>
</section>


<div class="blog-container">
            <a href="blog/2017/03/15/hawkular-opentracing-otsc.html"><h1>Distributed Tracing Workshop and OpenTracing Collaboration</h1></a>
            <p>15 March 2017, by Pavol Loffay</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The distributed tracing workshop is organized by the
<a href="https://groups.google.com/forum/#!forum/distributed-tracing">Distributed Tracing Workgroup</a>
and takes place approximately once a year. This time it was 18th-19th February in Berlin. It was a pleasure
to be there with people from various companies and share ideas and a common goal to improve distributed tracing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_agenda">Agenda</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The agenda covered various hot topics like in-process context propagation, proposal for trace context header, state
of OpenZipkin ecosystem and the latest happenings in OpenTracing. There were also research presentations by
Jonathan Mace from Brown University about Baggage protocol and Baggage buffers. The workshop also included
product presentations by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instana</p>
</li>
<li>
<p>Datadog</p>
</li>
<li>
<p>Amazon X-Ray</p>
</li>
<li>
<p>Jaeger by Uber</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It was great to see how other projects present data to end users and what type of higher level analysis they focus on.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We discussed many things, and here are my main takeaways.</p>
</div>
<div class="paragraph">
<p>Key upcoming changes in OpenTracing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Formal project organization called OpenTracing Specification Council (keep reading).</p>
</li>
<li>
<p>Clarification between logging, metrics and tracing. The discussion continues in <a href="https://github.com/opentracing/specification/pull/46">specification/pull/46</a>.</p>
</li>
<li>
<p>In-process context propagation. This feature will probably be the biggest change in the next OpenTracing
version. It should solve inconvenient passing of parent context. Users would just start new span and if there
is a parent available it will be automatically linked.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Trace context propagation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Currently there are no standard headers for passing trace context. Several tracing systems adopted
OpenZipkin&#8217;s <a href="https://github.com/openzipkin/b3-propagation">B3 Propagation</a>. Standardization of context header
should help with concerns like CORS and linking together traces between different service providers.
Proposed <a href="https://docs.google.com/document/d/1Mrw7hxVAkj7h98hvgRixDt1RrEJ5fsqqddPofIHRVvI/edit">document</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hawkular_on_opentracing_specification_council">Hawkular on OpenTracing Specification Council!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I am also happy to announce that the Hawkular project is part of the
<a href="https://github.com/opentracing/specification/blob/master/project_organization.md">OpenTracing Specification Council</a> (OTSC).
This more formal organization structure will help with project growth and ensure that all major constituencies
are involved. There will be regular calls to discuss priorities for OpenTracing standard and project, strategize around
third-party project integrations and offer tie-breaking votes for issues where consensus among the larger community has
proven elusive.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_links">Links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>OpenTracing project organization: <a href="https://github.com/opentracing/specification/blob/master/project_organization.md" class="bare">https://github.com/opentracing/specification/blob/master/project_organization.md</a></p>
</li>
<li>
<p>Trace context propagation proposal: <a href="https://docs.google.com/document/d/1Mrw7hxVAkj7h98hvgRixDt1RrEJ5fsqqddPofIHRVvI/edit?ts=58767913" class="bare">https://docs.google.com/document/d/1Mrw7hxVAkj7h98hvgRixDt1RrEJ5fsqqddPofIHRVvI/edit?ts=58767913</a></p>
</li>
<li>
<p>Workshop agenda: <a href="https://docs.google.com/document/d/16qNbn6IU43FuNMIie0rgWswIjWUCZUU0yNHxeR1vlRk/edit#heading=h.yt8qfxmai1sh" class="bare">https://docs.google.com/document/d/16qNbn6IU43FuNMIie0rgWswIjWUCZUU0yNHxeR1vlRk/edit#heading=h.yt8qfxmai1sh</a></p>
</li>
<li>
<p>Workshop notes: <a href="https://docs.google.com/document/d/16mKbo6pWKHq30KvYYVSqo6c8uTOTkNLDSgjKwUs1PGs" class="bare">https://docs.google.com/document/d/16mKbo6pWKHq30KvYYVSqo6c8uTOTkNLDSgjKwUs1PGs</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A big "Thank  you" goes to Adrian Cole for organizing it and also to all attendees for sharing great ideas and knowledge
around distributed tracing. Do not forget to join the group and be informed about upcoming events!</p>
</div>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2017/03/07/hawkular-metrics-0.25.0.Final-released.html"><h1>Hawkular Metrics 0.25.0 - Release</h1></a>
            <p>07 March 2017, by Stefan Negrea</p>
            <p><p>I am happy to announce release 0.25.0 of Hawkular Metrics. This release is anchored by general stability improvements and enhanced query capabilities for the external metrics alerter.</p><p>Here is a list of major changes:</p>
<ul>
  <li><strong>External Metrics Alerter - Enhancements</strong>
  <ul>
    <li>Both syntax and query capabilities have been revamped to allow defining conditions using flexible expressions with embedded stats queries</li>
    <li>The ExternalCondition expression is now JSON and has support for the new tag query language</li>
    <li>The full documentation about this feature can be found in the <a href="http://www.hawkular.org/hawkular-metrics/docs/user-guide/#_alerting">Alerting section</a> of the <a href="http://www.hawkular.org/hawkular-metrics/docs/user-guide/">user guide</a></li>
    <li>For more details please see: <a href="https://issues.jboss.org/browse/HWKMETRICS-566">HWKMETRICS-566</a> and <a href="https://github.com/hawkular/hawkular-metrics/pull/727">Pull Request 727</a></li>
  </ul></li>
  <li><strong>Dropwizard-Metrics - Merged</strong>
  <ul>
    <li>The <a href="https://github.com/hawkular/hawkular-dropwizard-reporter">Dropwizard-Metrics reporter</a> has been merged into the Metrics repository in <a href="https://github.com/hawkular/hawkular-metrics/tree/44677cc5d6267e738ea51bdd9a37be062ca1b8c2/clients/dropwizard">clients/dropwizard</a> module</li>
    <li>The <a href="https://github.com/hawkular/hawkular-dropwizard-reporter">old repository</a> is decommissioned, all new development will happen in the Metrics project</li>
    <li>This was done to simplify the compatibility matrix between the reporter and Hawkular Metrics REST API; going forward they will have identical versions. Furthermore, the compatibility is now tested via continuous integration tests.</li>
    <li>Please use the new maven artifact <a href="http://origin-repository.jboss.org/nexus/content/repositories/public/org/hawkular/metrics/hawkular-dropwizard-reporter/0.25.0.Final/">hawkular-dropwizard-reporter</a></li>
    <li>For more details please see: <a href="https://issues.jboss.org/browse/HWKMETRICS-585">HWKMETRICS-585</a></li>
  </ul></li>
  <li><strong>Tag Query Language - Enhancements</strong>
  <ul>
    <li>The tag query language now supports the dot character in the tag name. The list of allowed characters is <code>a-zA-Z_0-9.</code></li>
    <li>The query language allows regex matching for tag values but not tag names</li>
    <li>This allows translating JSON-like tag structures into Hawkular Metrics tags and query using the new tag query language</li>
    <li>For example, a tag structure like <code>[tag.subtag1: value1, tag.subtag2.subsubtag1: value2]</code> is now queriable via the tag query language with queries like <code>tag.subtag1 = value1</code> or <code>tag.subtag2.subsubtag1</code></li>
    <li>For more details please see: <a href="https://issues.jboss.org/browse/HWKMETRICS-611">HWKMETRICS-611</a></li>
  </ul></li>
  <li><strong>REST API - Request Logging</strong>
  <ul>
    <li>It is now possible to enable detailed logging for all REST API requests</li>
    <li>Two properties have been added to enable this features: <code>hawkular.metrics.request.logging.level</code> to enable logging for all read requests and <code>hawkular.metrics.request.logging.level.writes</code> to enable logging for write requests</li>
    <li>By default this feature is disabled, to enable just set the log level via each property</li>
    <li>For more details please see: <a href="https://issues.jboss.org/browse/HWKMETRICS-589">HWKMETRICS-589</a></li>
    <li>Here is a sample log:</li>
  </ul></li>
</ul>
<pre><code>INFO  [org.hawkular.metrics.api.jaxrs.util.RequestLoggingFilter] (default task-49)
REST API request:
--------------------------------------
path: /metrics
segments: [metrics]
method: GET
query parameters: {type=[availability]}
Tenant: T9a116f18-28cf-41b3-8ff8-c9752ac60e26232
</code></pre>
<ul>
  <li><strong>Other Updates</strong>
  <ul>
    <li>Automatically fix schema issues that occur when the server is restarted during initial schema installation (<a href="https://issues.jboss.org/browse/HWKMETRICS-594">HWKMETRICS-594</a>)</li>
    <li>Metric data points inserts have been optimized to use token ranges for Cassandra writes (<a href="https://issues.jboss.org/browse/HWKMETRICS-599">HWKMETRICS-599</a>)</li>
  </ul></li>
</ul><p><strong>Hawkular Alerting - Included</strong></p>
<ul>
  <li>Version <a href="https://issues.jboss.org/projects/HWKALERTS/versions/12333651">1.5.3</a></li>
  <li>Project details and repository: <a href="https://github.com/hawkular/hawkular-alerts">Github</a></li>
  <li>Documentation: <a href="http://www.hawkular.org/docs/rest/rest-alerts.html">REST API</a>, <a href="https://github.com/hawkular/hawkular-alerts/tree/master/examples">Examples</a>, <a href="http://www.hawkular.org/community/docs/developer-guide/alerts.html">Developer Guide</a></li>
</ul><p><strong>Hawkular Metrics Clients</strong></p>
<ul>
  <li>Python: <a href="https://github.com/hawkular/hawkular-client-python">https://github.com/hawkular/hawkular-client-python</a></li>
  <li>Go: <a href="https://github.com/hawkular/hawkular-client-go">https://github.com/hawkular/hawkular-client-go</a></li>
  <li>Ruby: <a href="https://github.com/hawkular/hawkular-client-ruby">https://github.com/hawkular/hawkular-client-ruby</a></li>
  <li>Java: <a href="https://github.com/hawkular/hawkular-client-java">https://github.com/hawkular/hawkular-client-java</a></li>
</ul><h3>Release Links</h3>
<ul>
  <li>Github Release: <a href="https://github.com/hawkular/hawkular-metrics/releases/tag/0.25.0">https://github.com/hawkular/hawkular-metrics/releases/tag/0.25.0</a></li>
  <li>JBoss Nexus Maven artifacts: <a href="http://origin-repository.jboss.org/nexus/content/repositories/public/org/hawkular/metrics/">http://origin-repository.jboss.org/nexus/content/repositories/public/org/hawkular/metrics/</a></li>
  <li>Jira release tracker: <a href="https://issues.jboss.org/projects/HWKMETRICS/versions/12333676">https://issues.jboss.org/projects/HWKMETRICS/versions/12333676</a></li>
</ul><p>A big "Thank you" goes to John Sanda, Matt Wringe, Michael Burman, Joel Takvorian, Jay Shaughnessy, Lucas Ponce, and Heiko Rupp for their project contributions.</p></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2017/02/22/pandas-and-hawkular-metrics.html"><h1>Processing Hawkular-Metrics data with Python Pandas</h1></a>
            <p>22 February 2017, by Michael Burman</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Storing the time series is not worth much if we can&#8217;t actually do something valuable with it. For some time, many data analytics have used Python tools to extract valuable information from the available data. Today, lets look at one of the popular options, <a href="http://pandas.pydata.org">Pandas</a>. In this blog post I will show how to fetch data from the Hawkular-Metrics and turn it to a processable form for the Pandas and do something with the data.</p>
</div>
<div class="paragraph">
<p>As a data, I&#8217;ve taken some real world values from my current air-to-water heat pump and how it has functioned in some non-ideal circumstances. To make things more difficult, I&#8217;ve started logging the information after there&#8217;s been historical data already so the starting values are not from the same point of time. To make things a bit more complicated I&#8217;ve also included some temperature values.</p>
</div>
<div class="paragraph">
<p>Lets start by introducing a helper function and initialize pandas. You can install Pandas with <code>pip install pandas</code> or with <code>dnf</code> or <code>apt</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python">import numpy as np
import pandas as pd
from hawkular import *

c = HawkularMetricsClient(tenant_id='pandas_test', port=8080)

def read_hawkular(c, id):
    s = c.query_metric(MetricType.Gauge, id, fromEarliest='true')
    df2 = pd.DataFrame(s, columns=['timestamp', 'value'])
    df2['timestamp'] = pd.to_datetime(df2['timestamp'], unit='ms')
    df2 = df2.set_index('timestamp')
    df2 = df2.rename(columns={'value': id})
    return df2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, with the read_hawkular we can fetch data from the Hawkular-Metrics using the given id. I&#8217;ve hardcoded Gauge as the metric type in this case as that&#8217;s the type of the values we&#8217;re processing today. We&#8217;ll also make the id as the column name for these values and use the timestamp as our index. Pandas will automatically convert the values to float64 and with our hints use the timestamps as the indexing value.</p>
</div>
<div class="paragraph">
<p>Lets insert some data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python">c.push(MetricType.Gauge, 'pollucom.reading', 41955, timestamp=1487192074052)
c.push(MetricType.Gauge, 'meter.reading', 584.22, timestamp=1487192074145)
c.push(MetricType.Gauge, 'temperature.reading', 0.0, timestamp=1487192075645)

c.push(MetricType.Gauge, 'pollucom.reading', 42007, timestamp=1487272174104)
c.push(MetricType.Gauge, 'meter.reading', 606.41, timestamp=1487272174467)
c.push(MetricType.Gauge, 'temperature.reading', 1.6, timestamp=1487272176067)

c.push(MetricType.Gauge, 'pollucom.reading', 42075, timestamp=1487403934003)
c.push(MetricType.Gauge, 'meter.reading', 636.60, timestamp=1487403934732)
c.push(MetricType.Gauge, 'temperature.reading', 0.7, timestamp=1487403932678)

c.push(MetricType.Gauge, 'pollucom.reading', 42234, timestamp=1487663134340)
c.push(MetricType.Gauge, 'meter.reading', 702.29, timestamp=1487663134230)
c.push(MetricType.Gauge, 'temperature.reading', -3.3, timestamp=1487663134678)

c.push(MetricType.Gauge, 'pollucom.reading', 42296, timestamp=1487745987030)
c.push(MetricType.Gauge, 'meter.reading', 732.32, timestamp=1487745987575)
c.push(MetricType.Gauge, 'temperature.reading', -8.8, timestamp=1487745987976)</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can already see from the data, we use millisecond precision when fetching the data and the timestamps have some variance in them. Now, using the previously defined function we will fetch the data to a Pandas DataFrame:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python"># Read the data

pollu = read_hawkular(c, 'pollucom.reading')
meter = read_hawkular(c, 'meter.reading')
temperature = read_hawkular(c, 'temperature.reading')

# Lets rename the columns

temperature = temperature.rename(columns={'temperature.reading': 'temperature'})
meter = meter.rename(columns={'meter.reading': 'electricity'})
pollu = pollu.rename(columns={'pollucom.reading': 'heat'})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Three distinct series are now stored in three distinct DataFrames. Combining them and looking at the data reveals something interesting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python">stats = pd.concat([pollu, meter, temperature]).sort_index()
&gt;&gt;&gt; stats
                         electricity   heat  temperature
timestamp
2017-02-15 20:54:34.052          NaN  41955          NaN
2017-02-15 20:54:34.145       584.22    NaN          NaN
2017-02-15 20:54:35.645          NaN    NaN          0.0
2017-02-16 19:09:34.104          NaN  42007          NaN
2017-02-16 19:09:34.467       606.41    NaN          NaN
2017-02-16 19:09:36.067          NaN    NaN          1.6
2017-02-18 07:45:32.678          NaN    NaN          0.7
2017-02-18 07:45:34.003          NaN  42075          NaN
2017-02-18 07:45:34.732       636.60    NaN          NaN
2017-02-21 07:45:34.230       702.29    NaN          NaN
2017-02-21 07:45:34.340          NaN  42234          NaN
2017-02-21 07:45:34.678          NaN    NaN         -3.3
2017-02-22 06:46:27.030          NaN  42296          NaN
2017-02-22 06:46:27.575       732.32    NaN          NaN
2017-02-22 06:46:27.976          NaN    NaN         -8.8
&gt;&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we see a very common problem for the time series processing. All the timestamps are close to each other, but they&#8217;re not quite aligned. So we can&#8217;t read from the same row what statistics we had for each value. If we wanted to fill the values from previous rows, we could do that easily with <code>fillna</code> function of the Pandas. However, in this case it makes more sense to resample the data to a one-day buckets and then drop the duplicate rows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python">stats = stats.resample('D', fill_method='ffill').drop_duplicates()

&gt;&gt;&gt; stats
            electricity   heat  temperature
timestamp
2017-02-15       584.22  41955          0.0
2017-02-16       606.41  42007          1.6
2017-02-18       636.60  42075          0.7
2017-02-21       702.29  42234         -3.3
2017-02-22       732.32  42296         -8.8
&gt;&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s much better. Now we can easily see the statistics for each day and how the counters had behaved. In this example it does not matter that we&#8217;re missing data, but there&#8217;s lots of tools in the Pandas to generate that missing data based on the rows we have. In this example, lets look at how to calculate from the values our coefficiency ratio (amount of heat generated divided by electricity used). We&#8217;ll do this by taking the difference of previous row to the current row from both heat as well as electricity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python">stats['cop'] = stats.diff().apply(lambda row: row['heat'] / row['electricity'], axis=1)

&gt;&gt;&gt; stats
            electricity   heat  temperature       cop
timestamp
2017-02-15       584.22  41955          0.0       NaN
2017-02-16       606.41  42007          1.6  2.343398
2017-02-18       636.60  42075          0.7  2.252401
2017-02-21       702.29  42234         -3.3  2.420460
2017-02-22       732.32  42296         -8.8  2.064602
&gt;&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first row shows <code>NaN</code> as we don&#8217;t have any information prior to it for calculation. The coefficiency numbers show something worrysome, they don&#8217;t seem to follow a pattern normally associated with them (higher temperature gives higher coefficiency). For a simple check, lets check the Pearson correlation between avg temperature and coefficiency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-python" data-lang="python">&gt;&gt;&gt; stats.temperature.corr(stats.cop)
0.65064171188572928
&gt;&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>I&#8217;ll leave the interpretation to the viewer, but lets comment quickly that the number of datapoints is too low in this example to have a meaningful value.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This was a short example on how to get started with Pandas and Hawkular-Metrics, but even with it we were able to calculate how efficiently our heat pump was working and actually notice that it&#8217;s working sub-optimally when temperature is high in this small sample scenario. The Pandas library gives multiple tools to process time series to a form that they can be used for further analytical processing, including but not limited to resampling, shifting, frequency conversions and periodic calculations. After modifying the data it can be easily further processed with other Python tools and even sent back to the Hawkular-Metrics in the processed form for storage purposes.</p>
</div>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2017/02/15/hawkular-services-0.32-released.html"><h1>Hawkular Services 0.32.Final</h1></a>
            <p>15 February 2017, by Heiko W. Rupp</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hawkular services is a ready to run distribution of Hawkular-Metrics with Alerts, Inventory, the WildFly agent and other components.
The version <a href="https://repository.jboss.org/nexus/content/groups/public/org/hawkular/services/hawkular-services-dist/0.32.0.Final/hawkular-services-dist-0.32.0.Final.zip">0.32.0.Final</a> has just been released and is ready to be tested and integrated with other projects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_s_in_this_release">What&#8217;s in this release</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release includes those changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Official docker images (see below)</p>
</li>
<li>
<p>Agent version 0.27</p>
</li>
<li>
<p>Agent has a new flag 'immutable', that when set will prevent modifications of its config or running state altering operations. That flag can be set via <code>-Dhawkular.agent.immutable=true</code></p>
</li>
<li>
<p>Hawkular-Metrics version 0.24.1</p>
</li>
<li>
<p>Better support for running on OpenShift</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following video gives a walk-through of some of the features</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="400" src="https://www.youtube.com/embed/hQqkwCoIDBA?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Hawkular Services is released every week on Tuesdays.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_get_started">Get started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To get started with Hawkular Services, <a href="https://repository.jboss.org/nexus/content/groups/public/org/hawkular/services/hawkular-services-dist/0.32.0.Final/hawkular-services-dist-0.32.0.Final.zip">download the latest release</a>, unzip it,
add a user and set the Agent to use the credentials for the user just added.</p>
</div>
<div class="paragraph">
<p>It can be accomplished with the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">export HAWKULAR_HOME="/path/to/hawkular-services"
export HAWKULAR_USERNAME="jdoe"
export HAWKULAR_PASSWORD="password"

cd "${HAWKULAR_HOME}"
"${HAWKULAR_HOME}/bin/add-user.sh" \
  -a \
  -u "${HAWKULAR_USERNAME}" \
  -p "${HAWKULAR_PASSWORD}" \
  -g read-write,read-only
"${HAWKULAR_HOME}/bin/standalone.sh" -Dhawkular.rest.user="${HAWKULAR_USERNAME}" -Dhawkular.rest.password="${HAWKULAR_PASSWORD}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before starting the server, you need to have Cassandra 3.0.9 up and running with the RPC port enabled either via
setting the env variable of <code>CASSANDRA_START_RPC</code> to <code>true</code></p>
</div>
<div class="paragraph">
<p>or by editing <code>cassandra.yml</code> and setting it there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-yml" data-lang="yml"># Whether to start the thrift rpc server.
start_rpc: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>ccm</code> you can use this to update the config: <code>ccm updateconf 'start_rpc: true'</code>.
Another option is via <code>nodetool enablethrift</code>.</p>
</div>
<div class="sect2">
<h3 id="_using_postgres">Using Postgres</h3>
<div class="paragraph">
<p>To use Postgres as backend you need to pass additional properties to the <code>standalone.sh</code> command
above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">"${HAWKULAR_HOME}/bin/standalone.sh" -Dhawkular.rest.user="${HAWKULAR_USERNAME}" \
    -Dhawkular.rest.password="${HAWKULAR_PASSWORD} \
    -Dhawkular.inventory.sql.jdbc.url=jdbc:postgresql://1.2.3.4:5432/hawkular \
    -Dhawkular.inventory.sql.jdbc.username=jdoe \
    -Dhawkular.inventory.sql.jdbc.password=password</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a postgres database called <em>hawkular</em> on host <em>1.2.3.4</em> owned by a user <em>jdoe</em> with a
 password of <em>password</em>.</p>
</div>
<div class="paragraph">
<p>See also
<a href="http://www.hawkular.org/hawkular-services/docs/user-guide/inventory/index.html#configuration-properties" class="bare">http://www.hawkular.org/hawkular-services/docs/user-guide/inventory/index.html#configuration-properties</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_build_from_master_and_cassandra">Build from master and Cassandra</h3>
<div class="paragraph">
<p>If you build from master, you can pass <code>-Pembeddedc</code> to get a distribution with embedded Cassandra for local development.
Similarly if you build via <code>-Pdev</code> a default user of <em>jdoe/password</em> will be installed and also be used with the agent.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_grafana_with_hawkular_services">Use Grafana with Hawkular-services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We do now have a Grafana datasource to make it easier to connect to Hawkular-services from Grafana.
You can download it from <a href="https://grafana.net/plugins/hawkular-datasource">Grafana.net</a>.
The <a href="https://github.com/hawkular/hawkular-grafana-datasource">website of the datasource tells more</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_get_started_via_docker_builds">Get started via Docker builds</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are official Docker images of the release available on
DockerHub at <a href="https://hub.docker.com/r/hawkular/hawkular-services/">Hawkular services</a></p>
</div>
<div class="paragraph">
<p>The <code>latest</code> tag will always point to the latest release.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">NOTE</dt>
<dd>
<p>There are also images with a <code>devel</code> tag, which are pushed by internal CI on individual commits.</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_unofficial_wildfly_agent">Unofficial WildFly + agent</h3>
<div class="paragraph">
<p>There is also an instrumented WildFly server available at
<a href="https://hub.docker.com/r/pilhuhn/hawkfly/">Instrumented WildFly</a>.</p>
</div>
<div class="paragraph">
<p>Both images have been instrumented with the <em>jdoe/password</em> user for the Hawkular server and the agent.</p>
</div>
<div class="paragraph">
<p>See also <a href="http://pilhuhn.blogspot.de/2016/06/using-hawkular-services-via-docker.html" class="bare">http://pilhuhn.blogspot.de/2016/06/using-hawkular-services-via-docker.html</a> on some more
details about using those images.</p>
</div>
</div>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2017/02/13/monitoring-canary-deployments.html"><h1>Monitoring Canary Releases with Hawkular APM</h1></a>
            <p>13 February 2017, by Juraci Paixão Kröhling</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In our last release, <a href="/blog/2017/02/04/hawkular-apm-service-deployments.html">we built a Services screen</a>
on top of a feature added a couple of releases ago, the "service name" and "build
stamps". These properties can be specified as an environment variable or system
property, and are automatically detected when the monitored application runs on
OpenShift.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-teaser.png" alt="Bars comparing performance of different service versions">
</div>
</div>
<div class="paragraph">
<p>In this blog post, we&#8217;ll show you how to use that screen to monitor a Canary release
scenario. <a href="https://martinfowler.com/bliki/CanaryRelease.html">A Canary</a> release
is a technique used to minimize downtime (and risk) between deployments by preparing
the new version on a completely different production environment and, once this new
version is ready to serve requests, redirect <em>some</em> traffic from the "old" version
to the "new" version. If this new version looks good, it gradually replaces the
old version, eventually taking over all traffic. This technique builds on top of
the <a href="https://martinfowler.com/bliki/BlueGreenDeployment.html">Blue-Green</a> deployment
technique.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_the_example_running">Getting the example running</h3>
<div class="paragraph">
<p>We&#8217;ll use our <a href="https://github.com/hawkular/hawkular-apm/tree/master/examples/vertx-opentracing">Vert.x OpenTracing example</a>
for this demo. First, let&#8217;s deploy the example into OpenShift, along with Hawkular APM,
by running the following Ansible playbook:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">$ ansible-playbook vertx-opentracing.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>After a few minutes, it should print out the address for the Order Manager microservice,
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>TASK [Print out the order-manager address] *************************************
ok: [localhost] =&gt; {
    "msg": "The hostname for the Order Manager service is: http://order-manager-order-manager.192.168.2.107.xip.io"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, change the <code>genorders.sh</code> script, to use this host instead of the
original <code><a href="http://localhost:8180" class="bare">http://localhost:8180</a></code> on the <code>curl</code> command. It should then read:
<code>curl -X POST -H "Content-Type: application/json" -d "$data" <a href="http://order-manager-order-manager.192.168.2.107.xip.io/orders" class="bare">http://order-manager-order-manager.192.168.2.107.xip.io/orders</a></code>.
Note that your hostname might be different than our example. You can then run
the <code>genorders.sh</code> script, which will simulate some random requests to the Order
Manager. The script will execute until it&#8217;s cancelled with <code>Ctrl+C</code>, and should
have an output similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>Creating an order for account=brian item=laptop quantity=3
{
  "accountId" : "brian",
  "itemId" : "laptop",
  "quantity" : 3,
  "id" : "d3f09a97-6f87-45c5-98c8-b592b6beb501"
}

Creating an order for account=sarah item=car quantity=4
Not account found

Creating an order for account=steve item=car quantity=2
{
  "accountId" : "steve",
  "itemId" : "car",
  "quantity" : 2,
  "id" : "7f095b1e-94a2-4398-8480-01aaea43e021"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hawkular APM should be located under the service name <code>hawkular-apm</code>, so, the URL
follows the pattern: <code><a href="https://hawkular-apm-order-manager.YOUR-IP.xip.io" class="bare">https://hawkular-apm-order-manager.YOUR-IP.xip.io</a></code>. Note
that you&#8217;ll need to change the <code>YOUR-IP</code> part.</p>
</div>
<div class="paragraph">
<p>After a few minutes with our <code>genorders.sh</code> script running, the following can be
seen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-initial-apm-screen-with-data.png" alt="Hawkular APM Dashboard with Data">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s open the <em>Services</em> tab, select the service <em>order-manager.account-manager</em>
and the <em>order-manager.account-manager-1</em> version. These names are derived automatically
from the service name and deployment number provided by OpenShift. Let&#8217;s select
an <em>Aggregation Interval</em> of 10 seconds.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-single-service.png" alt="Hawkular APM Services Tab with One Service">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_introducing_the_blue_deployment_and_the_canary_release">Introducing the Blue Deployment and the Canary Release</h3>
<div class="paragraph">
<p>Now, we&#8217;ll create a new build and new application for our "Blue" deployment. We
first set the current deployment to have 4 replicas, so that we&#8217;ll have 80% of
the traffic going to the old version, and 20% going to the new one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">cd account-manager/
oc scale deploymentconfig account-manager --replicas=4
oc new-build --binary --name=account-manager-blue -l app=account-manager-blue
oc start-build account-manager-blue --from-dir=. --follow
oc new-app \
  account-manager-blue \
  -l app=account-manager-blue \
  HAWKULAR_APM_URI='http://hawkular-apm' \
  HAWKULAR_APM_USERNAME='admin' \
  HAWKULAR_APM_PASSWORD='password'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the expected output for the previous command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>--&gt; Found image 3f61c6a (37 seconds old) in image stream account-manager-blue under tag "latest" for "account-manager-blue"

    * This image will be deployed in deployment config "account-manager-blue"
    * The image does not expose any ports - if you want to load balance or send traffic to this component
      you will need to create a service with 'expose dc/account-manager-blue --port=[port]' later

--&gt; Creating resources with label app=account-manager-blue ...
    deploymentconfig "account-manager-blue" created
--&gt; Success
    Run 'oc status' to view your app.</code></pre>
</div>
</div>
<div class="paragraph">
<p>We should also have a new service displayed on OpenShift console. Note the new
<em>account-manager-blue</em> deployment, with 1 pod.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-openshift-account-manager-services.png" alt="OpenShift with Blue/Green deployments for Account Manager">
</div>
</div>
<div class="paragraph">
<p>Our Account Manager microservice is a Vert.x Verticle, and reacts on messages sent
to <code>AccountManager.getAccount</code>. As we are using a clustered event bus, our new
<em>account-manager-blue</em> service will join the cluster and start replying to those
messages. The Vert.x clustered bus will take care of load balancing the processing
of the messages for us.</p>
</div>
<div class="paragraph">
<p>Because of that, we should already have some data being captured and reported to
our Hawkular APM server. On the <em>Services</em> screen, add the new service <em>order-manager.account-manager-blue</em>,
version <em>order-manager.account-manager-blue-1</em> to the graphic. It should then look similar
to this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-account-manager-blue-added.png" alt="Hawkular APM Services Tab with Blue and Green services">
</div>
</div>
<div class="paragraph">
<p>We should see the bar for our <em>blue</em> deployment (orange bar on the image) to be
around a quarter the size of the old version (blue bar on the image). As the number
of errors is in line with what we expect, we can now reduce the traffic to the old
version by adding more replicas to the new version and decreasing replicas from
the old one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">oc scale deploymentconfig account-manager-blue --replicas=3
oc scale deploymentconfig account-manager --replicas=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s leave it running for a minute or so, and we should see that the new version
is now responsible for processing around 60% of the traffic, while the old version
is now processing around 40%. If it still looks good, we&#8217;ll make it 80%/20%:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">oc scale deploymentconfig account-manager-blue --replicas=4
oc scale deploymentconfig account-manager --replicas=1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Eventually, we would want to decommission the old version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">oc scale deploymentconfig account-manager-blue --replicas=5
oc scale deploymentconfig account-manager --replicas=0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s now simulate a new build for our <em>Account Manager</em> microservice, to be deployed
on the <em>green</em> service (<em>account-manager</em>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">cd account-manager/
oc start-build account-manager --from-dir=. --follow</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once it&#8217;s finished, we can direct some of the traffic to this new version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">oc scale deploymentconfig account-manager --replicas=1
oc scale deploymentconfig account-manager-blue --replicas=4</code></pre>
</div>
</div>
<div class="paragraph">
<p>After a few seconds, we should see the new version as a valid option on our <em>Services</em>
screen:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-new-version-available.png" alt="New Green version">
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s add it to the graphic, and watch the errors. If this version looks sane,
we can direct more traffic to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">oc scale deploymentconfig account-manager --replicas=3
oc scale deploymentconfig account-manager-blue --replicas=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>And eventually, direct all traffic to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-bash" data-lang="bash">oc scale deploymentconfig account-manager --replicas=5
oc scale deploymentconfig account-manager-blue --replicas=0</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the next screenshot, we can infer the following from the graphic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We started with 100% traffic on <em>order-manager.account-manager-1</em> (green deployment, blue bar)</p>
</li>
<li>
<p>We directed some traffic to <em>order-manager.account-manager-blue-1</em> (blue deployment, orange bar)</p>
</li>
<li>
<p>We switched off <em>order-manager.account-manager-1</em> (green deployment, blue bar)</p>
</li>
<li>
<p>We deployed the new version <em>order-manager.account-manager-2</em> (green deployment, green bar)</p>
</li>
<li>
<p>We directed some traffic to <em>order-manager.account-manager-2</em> (green deployment, green bar)</p>
</li>
<li>
<p>We switched off <em>order-manager.account-manager-blue-1</em> (blue deployment, orange bar)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2017/2017-02-13-final.png" alt="Final Result">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_closing_notes">Closing notes</h3>
<div class="paragraph">
<p>On a real world scenario, the manual steps we did would be automated, potentially
making your Continuous Deployment scripts read data from Hawkular APM in order
to decide whether to scale up or down a canary release. Thanks to Vert.x, we were
able to completely abstract the load balancer, controlling the percentage of traffic
by adjusting the number of replicas on the Green/Blue deployments, but it&#8217;s also
possible to achieve similar effects with other stacks. The <a href="http://bit.ly/msa-instructions">OpenShift Hello World Microservices Architecture</a>
shows another way this can be achieved.</p>
</div>
<div class="paragraph">
<p>Thanks to OpenShift, we were able to instantly see the performance of new versions,
comparing it with previous versions. Outside of OpenShift, we would be able to get
the same effect by properly setting the environment variables <em>HAWKULAR_APM_SERVICE_NAME</em>
and <em>HAWKULAR_APM_BUILDSTAMP</em>.</p>
</div>
<div class="paragraph">
<p>Try it out and let us know about your experiments! Should you face any issues, or
if you want to talk to us, join us at <code>#hawkular</code> on <code>irc.freenode.net</code>.</p>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />



    <div class="large-4 columns blog-post-listings">
        <h2>Older posts:</h2>
        <ul>
          <li>08 February 2017 - <a href="blog/2017/02/08/hawkular-metrics-0.24.0.Final-released.html">Hawkular Metrics 0.24.0 - Release</a></li>
          <li>07 February 2017 - <a href="blog/2017/02/07/hawkular-metrics-roadmap.html">Hawkular Metrics - 2017 Roadmap</a></li>
          <li>04 February 2017 - <a href="blog/2017/02/04/hawkular-apm-service-deployments.html">Hawkular APM: Comparing performance of service versions</a></li>
          <li>03 February 2017 - <a href="blog/2017/02/03/grafana-events.html">Display custom events in Grafana</a></li>
          <li>31 January 2017 - <a href="blog/2017/01/31/hawkular-services-0.30-released.html">Hawkular Services 0.30.0.Final</a></li>
          <li>27 January 2017 - <a href="blog/2017/01/27/hosa-status.html">Getting the status of Hosa</a></li>
          <li>17 January 2017 - <a href="blog/2017/01/17/obst-hosa.html">Monitoring Microservices on OpenShift with HOSA</a></li>
          <li>16 January 2017 - <a href="blog/2017/01/16/hawkular-metrics-with-dropwizard.html">Reporting Dropwizard metrics to Hawkular</a></li>
          <li>13 January 2017 - <a href="blog/2017/01/13/events-aggregation-extension.html">Extending Complex Event Processing in Hawkular Alerting</a></li>
          <li>04 January 2017 - <a href="blog/2017/01/04/hawkular-metrics-0.23.0.Final-released.html">Hawkular Metrics 0.23.0 - Release</a></li>
          <li>22 December 2016 - <a href="blog/2016/12/22/hawkular-hawkinit-cli-tool.html">Hawkinit</a></li>
          <li>16 December 2016 - <a href="blog/2016/12/16/hawkular-apm-vertx-opentracing-openshift.html">Hawkular APM improvements for OpenShift</a></li>
          <li>06 December 2016 - <a href="blog/2016/12/06/hawkular-metrics-0.22.0.Final-released.html">Hawkular Metrics 0.22.0 - Release</a></li>
          <li>25 November 2016 - <a href="blog/2016/11/25/hawkular-apm-on-openshift.html">Using Hawkular APM on OpenShift</a></li>
          <li>16 November 2016 - <a href="blog/2016/11/16/hawkular-apm-opentracing-js.html">Hawkular APM OpenTracing JavaScript</a></li>
          <li>09 November 2016 - <a href="blog/2016/11/09/hawkular-services-0.20.0.Final.html">Hawkular Services 0.20.0.Final</a></li>
          <li>25 October 2016 - <a href="blog/2016/10/25/hawkular-metrics-0.21.0.Final-released.html">Hawkular Metrics 0.21.0 - Release</a></li>
          <li>24 October 2016 - <a href="blog/2016/10/24/hawkfx-alerts.html">Define Alert Triggers via HawkFX</a></li>
          <li>24 October 2016 - <a href="blog/2016/10/24/hawkular-metrics-openshift-and-grafana.html">Monitoring Microservices with OpenShift, Hawkular Metrics and Grafana</a></li>
          <li>17 October 2016 - <a href="blog/2016/10/17/hawkular-apm-opentracing-and-alerts.html">Hawkular APM supports OpenTracing and Alerts</a></li>
          <li>14 October 2016 - <a href="blog/2016/10/14/hawkular-apm-polyglot-zipkin.html">Hawkular APM Distributed Tracing of Polyglot Application using Zipkin Instrumentations</a></li>
          <li>06 October 2016 - <a href="blog/2016/10/06/hawkular-metrics-0.20.0.Final-released.html">Hawkular Metrics 0.20.0 - Release</a></li>
          <li>19 September 2016 - <a href="blog/2016/09/19/hawkular-apm-on-msa.html">Using Hawkular APM on Red Hat&apos;s Microservices Reference Architecture example</a></li>
          <li>14 September 2016 - <a href="blog/2016/09/14/consuming-hawkular-api-over-ssl.html">Consuming Hawkular API over SSL with self signed certificates</a></li>
          <li>05 September 2016 - <a href="blog/2016/09/05/hawkular-metrics-0.19.0.Final-released.html">Hawkular Metrics 0.19.0 - Release</a></li>
          <li>31 August 2016 - <a href="blog/2016/08/31/spark-metric-analysis.html">Metric Data Analysis using the Apache Spark</a></li>
          <li>11 August 2016 - <a href="blog/2016/08/11/vertx-agent-inventory-impl.html">Vert.x agent inventory implementation</a></li>
          <li>01 August 2016 - <a href="blog/2016/08/01/hawkular-metrics-0.18.0.Final-released.html">Hawkular Metrics 0.18.0 - Release</a></li>
          <li>19 July 2016 - <a href="blog/2016/07/19/android-client-progess.html">What is new in Android Client</a></li>
          <li>14 July 2016 - <a href="blog/2016/07/14/hawkular-apm-openshift.html">Monitoring Application Performance within Openshift</a></li>
          <li>14 July 2016 - <a href="blog/2016/07/14/hawkular-miq.html">Getting started with ManageIQ and Hawkular</a></li>
          <li>13 July 2016 - <a href="blog/2016/07/13/hawkfx.html">Introducing HawkFX</a></li>
          <li>12 July 2016 - <a href="blog/2016/07/12/hawkular-and-jmx-jolokia.html">Hawkular and JMX/Jolokia</a></li>
          <li>12 July 2016 - <a href="blog/2016/07/12/hawkular-and-prometheus.html">Hawkular and Prometheus</a></li>
          <li>06 July 2016 - <a href="blog/2016/07/06/hawkular-metrics-0.17.0.Final-released.html">Hawkular Metrics 0.17.0 - Release</a></li>
          <li>05 July 2016 - <a href="blog/2016/07/05/hawkular-services-0.0.5.Final.html">Hawkular Services 0.0.5.Final</a></li>
          <li>05 July 2016 - <a href="blog/2016/07/05/scaling-hawkular-alerting.html">Scaling stateful services: an example in Hawkular Alerting</a></li>
          <li>27 June 2016 - <a href="blog/2016/06/27/hawkular-apm-0.9-released.html">Hawkular APM 0.9.0.Final Released</a></li>
          <li>14 June 2016 - <a href="blog/2016/06/14/hawkular-services-0.0.2.Final.html">Hawkular Services 0.0.2.Final</a></li>
          <li>01 June 2016 - <a href="blog/2016/06/01/hawkular-btm-to-apm.html">Hawkular BTM component rename</a></li>
          <li>01 June 2016 - <a href="blog/2016/06/01/hawkular-metrics-0.16.0.Final-released.html">Hawkular Metrics 0.16.0 - Release</a></li>
          <li>26 May 2016 - <a href="blog/2016/05/26/hawkular-btm-booker-demo.html">Monitoring Microservices for Application Performance, Distributed Tracing and Business Transactions</a></li>
          <li>24 May 2016 - <a href="blog/2016/05/24/hawkular-btm-ticketmonster-demo.html">Obtaining business metrics without the need to instrument your application</a></li>
          <li>02 May 2016 - <a href="blog/2016/05/02/hawkular-metrics-0.15.0.Final-released.html">Hawkular Metrics 0.15.0 - Release</a></li>
          <li>28 April 2016 - <a href="blog/2016/04/28/new-packaging.html">New Hawkular packaging</a></li>
          <li>27 April 2016 - <a href="blog/2016/04/27/hawkular-inventory-0.15.0.Final-released.html">Hawkular Inventory 0.15.0.Final - Release</a></li>
          <li>22 April 2016 - <a href="blog/2016/04/22/collecting-metrics-from-prometheus-endpoints.html">Collecting Metrics from Prometheus Endpoints</a></li>
          <li>21 April 2016 - <a href="blog/2016/04/21/datamining-first-release.html">Hawkular Data Mining 0.1.0.Final Released</a></li>
          <li>19 April 2016 - <a href="blog/2016/04/19/jmxtrans-to-hawkular-metrics.html">Monitoring JVM applications with jmxtrans</a></li>
          <li>08 April 2016 - <a href="blog/2016/04/08/hawkular-manage-iq-sprint-demo.html">Hawkular in ManageIQ sprint demo(s)</a></li>
          <li>29 March 2016 - <a href="blog/2016/03/29/hawkular-metrics-0.14.0.Final-released.html">Hawkular Metrics 0.14.0 - Release</a></li>
          <li>21 March 2016 - <a href="blog/2016/03/20/qr-android.html">QR Code support for Android Client</a></li>
          <li>16 March 2016 - <a href="blog/2016/03/16/hawkular-metrics-roadmap.html">Hawkular Metrics - Roadmap</a></li>
          <li>15 March 2016 - <a href="blog/2016/03/15/hawkular-1.0.0.Alpha11-released.html">The eleventh milestone of Hawkular released</a></li>
          <li>02 March 2016 - <a href="blog/2016/03/02/hawkular-metrics-0.13.0.Final-released.html">Hawkular Metrics 0.13.0 - Release</a></li>
          <li>23 February 2016 - <a href="blog/2016/02/22/hawkular-manage-iq.html">Integration with ManageIQ</a></li>
          <li>02 February 2016 - <a href="blog/2016/02/02/hawkular-metrics-0.12.0.Final-released.html">Hawkular Metrics 0.12.0 - Release</a></li>
          <li>25 January 2016 - <a href="blog/2016/01/25/hawkular-btm-apm.html">Hawkular-BTM now includes Application Performance Management</a></li>
          <li>21 January 2016 - <a href="blog/2016/01/21/hawkular-1.0.0.Alpha9-released.html">The nineth milestone of Hawkular released</a></li>
          <li>21 January 2016 - <a href="blog/2016/01/21/hawkular-command-gateway-clients.html">Hawkular Command Gateway Clients</a></li>
          <li>20 January 2016 - <a href="blog/2016/01/20/hawkular-datamining-demo-hwk-alpha9.html">Hawkular Data Mining - Predictive Charts</a></li>
          <li>12 January 2016 - <a href="blog/2016/01/12/hawkular-metrics-0.11.0.Final-released.html">Hawkular Metrics 0.11.0 - Release</a></li>
          <li>05 January 2016 - <a href="blog/2016/01/05/we-are-hiring.html">We are hiring !</a></li>
          <li>16 December 2015 - <a href="blog/2015/12/16/hawkular-1.0.0.Alpha8-released.html">The eigth milestone of Hawkular released</a></li>
          <li>01 December 2015 - <a href="blog/2015/12/01/hawkular-btm-instrument-docker-image.html">BTM: Instrumenting an application running from a docker image</a></li>
          <li>30 November 2015 - <a href="blog/2015/11/30/hawkular-btm-0-6-0-released.html">Monitoring Business Transactions in JBoss Ticket Monster App (Part 2)</a></li>
          <li>19 November 2015 - <a href="blog/2015/11/19/hawkular-1.0.0.Alpha7-released.html">Yet another release of Hawkular, the seventh one !</a></li>
          <li>10 November 2015 - <a href="blog/2015/11/10/hawkular-btm-0-5-0-released.html">Monitoring Business Transactions in JBoss Ticket Monster App</a></li>
          <li>30 October 2015 - <a href="blog/2015/10/30/hawkular-metrics-0.8.0.Final-released.html">Hawkular Metrics 0.9.0 - Release</a></li>
          <li>30 October 2015 - <a href="blog/2015/11/30/hawkular-metrics-0.10.0.Final-released.html">Hawkular Metrics 0.10.0 - Release</a></li>
          <li>24 October 2015 - <a href="blog/2015/10/24/hawkular-datamining.html">Introduction to Hawkular Data Mining Module</a></li>
          <li>21 October 2015 - <a href="blog/2015/10/21/hawkular-1.0.0.Alpha6-released.html">The sixth milestone of Hawkular released</a></li>
          <li>12 October 2015 - <a href="blog/2015/10/12/hawkular-metrics-0.8.0.Final-released.html">Hawkular Metrics 0.8.0 - Release</a></li>
          <li>09 October 2015 - <a href="blog/2015/10/09/graph-db-performance.html">Titan Graph DB Performance Tips</a></li>
          <li>06 October 2015 - <a href="blog/2015/10/06/hawkular-btm-0-4-0-released.html">Hawkular-BTM 0.4.0 released</a></li>
          <li>05 October 2015 - <a href="blog/2015/10/05/hawkular-metrics-2k-commits.html">Hawkular Metrics - 2k Commits</a></li>
          <li>30 September 2015 - <a href="blog/2015/09/30/hawkular-metrics-0.7.0.Final-released.html">Hawkular Metrics 0.7.0 - Release</a></li>
          <li>23 September 2015 - <a href="blog/2015/09/23/hawkular-1.0.0.Alpha5-released.html">The fifth milestone of Hawkular released</a></li>
          <li>03 September 2015 - <a href="blog/2015/09/03/monitoring-rails-using-hawkular-metrics.html">Monitoring Rails App using Hawkular Metrics</a></li>
          <li>29 August 2015 - <a href="blog/2015/08/29/hawkular-metrics-0.6.0.Final-released.html">Hawkular Metrics 0.6.0 - Release</a></li>
          <li>27 August 2015 - <a href="blog/2015/08/27/hawkular-1.0.0.Alpha4-released.html">The fourth milestone of Hawkular released</a></li>
          <li>25 August 2015 - <a href="blog/2015/08/25/hawkular-alerts-autoresolve.html">Introduction to AutoResolve triggers</a></li>
          <li>19 August 2015 - <a href="blog/2015/08/19/hawkular-alerts-standalone.html">Using Hawkular Alerts as a standalone engine</a></li>
          <li>14 August 2015 - <a href="blog/2015/08/14/hawkular-btm-0.3.0-demo.html">Visualising Business Transaction Information using Hawkular BTM 0.3.0.Final with RTGov Integration</a></li>
          <li>30 July 2015 - <a href="blog/2015/07/30/hawkular-1.0.0.Alpha3-released.html">Hawkular, all good things make three!</a></li>
          <li>22 July 2015 - <a href="blog/2015/07/22/hawkular-btm-0.2.0-demo.html">Monitoring a Vert.x Application using Hawkular BTM 0.2.0.Final</a></li>
          <li>02 July 2015 - <a href="blog/2015/07/02/hawkular-1.0.0.Alpha2-released.html">Hawkular, the second release!</a></li>
          <li>01 July 2015 - <a href="blog/2015/07/01/hawkular-btm-0-1-0-released.html">Hawkular-BTM 0.1.0 released</a></li>
          <li>01 July 2015 - <a href="blog/2015/07/01/hawkular-btm-0.1.0-demo.html">Monitoring a SwitchYard Application using Hawkular BTM 0.1.0.Final</a></li>
          <li>22 June 2015 - <a href="blog/2015/06/23/hawkular-metrics-0-4-0-released.html">Hawkular Metrics 0.4.0 - Release</a></li>
          <li>17 June 2015 - <a href="blog/2015/06/17/marsjug-and-rivieradev-retrospective.html">MarsJUG and RivieraDEV retrospective</a></li>
          <li>04 June 2015 - <a href="blog/2015/06/04/hawkular-1.0.0.Alpha1-released.html">Hawkular, the first release!</a></li>
          <li>01 June 2015 - <a href="blog/2015/06/01/hawkular-metrics-0-3-4-released.html">Hawkular Metrics 0.3.4 - Release</a></li>
          <li>30 April 2015 - <a href="blog/2015/04/30/introducing-btm.html">Introducing the latest Hawkular component: Business Transaction Management</a></li>
          <li>29 April 2015 - <a href="blog/2015/04/29/hello-to-gsoc-students.html">Hello GSoC Students</a></li>
          <li>17 April 2015 - <a href="blog/2015/04/14/intro-to-hawkular.html">Intro to Hawkular, a middleware open-source management solution</a></li>
          <li>14 April 2015 - <a href="blog/2015/04/14/hawkular-monitor-agent-intro.html">Hawkular-Monitor Agent</a></li>
          <li>09 April 2015 - <a href="blog/2015/04/09/alert-notifiers-for-mobile-devices.html">Alert notifiers for mobile devices</a></li>
          <li>08 April 2015 - <a href="blog/2015/2015-04-08-1.html">Testing collectd integration</a></li>
          <li>07 April 2015 - <a href="blog/2015/2015-04-07-1.html">Hawkular Metrics 0.3.1 - Release</a></li>
          <li>01 April 2015 - <a href="blog/2015/2015-04-01-1.html">Hawkular Discontinued</a></li>
          <li>30 March 2015 - <a href="blog/2015/2015-03-30-1.html">Dockerized Hawkular builds available</a></li>
          <li>24 February 2015 - <a href="blog/2015/2015-02-24-1.html">The Kettle starts boiling</a></li>
          <li>16 February 2015 - <a href="blog/2015/2015-02-16-1.html">Hawkular Metrics 0.2.7 - Release</a></li>
        <br/><br/>
    </div>

    <a href=feed.xml><i class="fa fa-rss"></i> RSS Feed</a>
</div>


		</div>
		<div id="push"></div>
    </div>

    <section class="redhat clearfix">
      <div class="container">
        <p class="pull-left">
          <a href="http://www.redhat.com/">
            <img alt="redhatlogo-white" src="/img/redhatlogo-white.png" width="130">
          </a>
        </p>
        <p class="muted credit pull-right">
				  &copy; 2016 | Hawkular is released under <a href="/license.html">Apache License v2.0</a>
					<a href="https://twitter.com/hawkular_org" class="twitter-follow-button" data-show-count="false" data-size="medium">Follow @hawkular_org</a>
				  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
					<iframe src="https://ghbtns.com/github-btn.html?user=hawkular&repo=hawkular-services&type=star" frameborder="0" scrolling="0" class="github-stars-btn"></iframe>
				</p>

    <!--p id="forkongithubp"><span id="forkongithub">
      <a href="https://github.com/hawkular" class="bg-grey">
        Fork me on GitHub
      </a>
    </span></p-->
      </div>
    </section>

    <!-- javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- js -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="js/jbossorg-tabzilla.js"></script>
    <script src="js/behavior.js"></script>
    <script src="js/prettify.js"></script>
    <script src="js//ekko-lightbox.min.js"></script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'hawkular';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61728352-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
